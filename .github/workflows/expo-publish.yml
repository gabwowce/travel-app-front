name: Expo Preview (EAS Update)

on:
  push:
    branches: [feature/rtk-query-refactor]   # arba "**" jei norite visÅ³ Å¡akÅ³
  workflow_dispatch:

jobs:
  preview:
    runs-on: ubuntu-latest
    env:
      EXPO_TOKEN: ${{ secrets.EXPO_TOKEN }}

    steps:
      - uses: actions/checkout@v4

      # â¬‡ï¸  Naujas (Node 20 tinka) Expo + EAS CLI
      - run: npm install --global expo eas-cli

      # Prisijungiame prie paskyros
      - run: expo login --token "$EXPO_TOKEN"

      # ğŸ”‘  (jei dar nesat padarÄ™) susiejame repo su EAS projekto ID
      # - run: eas init --id <jÅ«sÅ³-projekto-id> --non-interactive

      # Publikuojam â€previewâ€œ Å¡akÄ… (galite rinktis kitÄ… vardÄ…)
      - run: eas update --branch preview --auto --non-interactive \
              --message "CI update $(date +'%Y-%m-%d %H:%M')"
